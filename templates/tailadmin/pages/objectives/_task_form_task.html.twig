{# Template pour le type TASK - Tâche classique #}
<form @submit.prevent="saveTaskConfig()" class="space-y-6">
  <!-- Titre -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Titre <span class="text-error-500">*</span>
    </label>
    <input
      type="text"
      x-model="taskConfig.title"
      required
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      placeholder="Titre de la tâche"
    />
  </div>

  <!-- Description -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Description
    </label>
    <textarea
      x-model="taskConfig.description"
      rows="4"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      placeholder="Description de la tâche"
    ></textarea>
  </div>

  <!-- Statut -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Statut
    </label>
    <select
      x-model="taskConfig.status"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="pending">À faire</option>
      <option value="in_progress">En cours</option>
      <option value="completed">Terminé</option>
    </select>
  </div>

  <!-- Dates et Heures -->
  <div class="grid grid-cols-2 gap-4">
    <!-- Date et heure de début -->
    <div>
      <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
        Date et heure de début
      </label>
      <input
        type="datetime-local"
        x-model="taskConfig.createdAt"
        class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      />
    </div>
    <!-- Date et heure de fin -->
    <div>
      <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
        Date et heure de fin
      </label>
      <input
        type="datetime-local"
        x-model="taskConfig.dueDate"
        class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      />
    </div>
  </div>

  <!-- Affectation -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Affectation
    </label>
    <select
      x-model="taskConfig.assignedType"
      @change="onAssignedTypeChange()"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 mb-3"
    >
      <option value="coach">Coach</option>
      <option value="student">Élève</option>
      <option value="parent">Parent</option>
      <option value="specialist">Spécialiste</option>
    </select>
    
    <!-- Sélecteur d'élève -->
    <select
      x-show="taskConfig.assignedType === 'student'"
      x-model="taskConfig.studentId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">Sélectionner un élève</option>
      <template x-for="student in students" :key="student.id">
        <option :value="student.id" x-text="student.firstName + ' ' + student.lastName"></option>
      </template>
    </select>
    
    <!-- Sélecteur de parent -->
    <select
      x-show="taskConfig.assignedType === 'parent'"
      x-model="taskConfig.parentId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">Sélectionner un parent</option>
      <template x-for="parent in parents" :key="parent.id">
        <option :value="parent.id" x-text="parent.firstName + ' ' + parent.lastName"></option>
      </template>
    </select>
    
    <!-- Sélecteur de spécialiste -->
    <select
      x-show="taskConfig.assignedType === 'specialist'"
      x-model="taskConfig.specialistId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">Sélectionner un spécialiste</option>
      <template x-for="specialist in specialists" :key="specialist.id">
        <option :value="specialist.id" x-text="specialist.name"></option>
      </template>
    </select>
  </div>

  <!-- Fréquence -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Fréquence
    </label>
    <select
      x-model="taskConfig.frequency"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="none">Aucune</option>
      <option value="hourly">Toutes les heures</option>
      <option value="daily">Quotidienne</option>
      <option value="half_day">Une demi-journée</option>
      <option value="every_2_days">Tous les 2 jours</option>
      <option value="weekly">Hebdomadaire</option>
      <option value="monthly">Mensuelle</option>
      <option value="yearly">Annuelle</option>
    </select>
  </div>

  <!-- Preuve requise -->
  <div class="flex items-center gap-2">
    <input
      type="checkbox"
      x-model="taskConfig.requiresProof"
      id="requires-proof-task"
      class="h-4 w-4 rounded border-gray-300 text-brand-500 focus:ring-brand-500 dark:border-gray-700"
    />
    <label for="requires-proof-task" class="text-sm font-medium text-gray-700 dark:text-gray-300">
      Preuve requise
    </label>
  </div>

  <!-- Boutons -->
  <div class="flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-800">
    <button
      type="button"
      @click="closeConfigSheet()"
      class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"
    >
      Annuler
    </button>
    <button
      type="submit"
      :disabled="configSubmitting"
      class="flex-1 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white shadow-theme-xs hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      <span x-show="!configSubmitting">Enregistrer</span>
      <span x-show="configSubmitting">Enregistrement...</span>
    </button>
  </div>
</form>


