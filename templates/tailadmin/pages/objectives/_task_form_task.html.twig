{# Template pour le type TASK - TÃ¢che classique #}
<form @submit.prevent="saveTaskConfig()" class="space-y-6">
  <!-- Titre -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Titre <span class="text-error-500">*</span>
    </label>
    <input
      type="text"
      x-model="taskConfig.title"
      required
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      placeholder="Titre de la tÃ¢che"
    />
  </div>

  <!-- Description -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Description
    </label>
    <textarea
      x-model="taskConfig.description"
      rows="4"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      placeholder="Description de la tÃ¢che"
    ></textarea>
  </div>

  <!-- Statut -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Statut
    </label>
    <select
      x-model="taskConfig.status"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="pending">Ã€ faire</option>
      <option value="in_progress">En cours</option>
      <option value="completed">TerminÃ©</option>
    </select>
  </div>

  <!-- Affectation -->
  <div>
    <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
      Affectation
    </label>
    <select
      x-model="taskConfig.assignedType"
      @change="onAssignedTypeChange()"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 mb-3"
    >
      <option value="coach">Coach</option>
      <option value="student">Ã‰lÃ¨ve</option>
      <option value="parent">Parent</option>
      <option value="specialist">SpÃ©cialiste</option>
    </select>
    
    <!-- SÃ©lecteur d'Ã©lÃ¨ve -->
    <select
      x-show="taskConfig.assignedType === 'student'"
      x-model="taskConfig.studentId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">SÃ©lectionner un Ã©lÃ¨ve</option>
      <template x-for="student in students" :key="student.id">
        <option :value="student.id" x-text="student.firstName + ' ' + student.lastName"></option>
      </template>
    </select>
    
    <!-- SÃ©lecteur de parent -->
    <select
      x-show="taskConfig.assignedType === 'parent'"
      x-model="taskConfig.parentId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">SÃ©lectionner un parent</option>
      <template x-for="parent in parents" :key="parent.id">
        <option :value="parent.id" x-text="parent.firstName + ' ' + parent.lastName"></option>
      </template>
    </select>
    
    <!-- SÃ©lecteur de spÃ©cialiste -->
    <select
      x-show="taskConfig.assignedType === 'specialist'"
      x-model="taskConfig.specialistId"
      class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
    >
      <option value="">SÃ©lectionner un spÃ©cialiste</option>
      <template x-for="specialist in specialists" :key="specialist.id">
        <option :value="specialist.id" x-text="specialist.name"></option>
      </template>
    </select>
  </div>

  <!-- PÃ©riode et frÃ©quence (regroupÃ©es) -->
  <div class="space-y-4 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50">
    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4">ðŸ“… PÃ©riode et frÃ©quence</h3>
    
    <!-- Dates -->
    <div class="grid grid-cols-2 gap-4">
      <!-- Date et heure de dÃ©but -->
      <div>
        <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
          Date et heure de dÃ©but
        </label>
        <input
          type="datetime-local"
          x-model="taskConfig.startDate"
          class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
        />
      </div>
      
      <!-- Date et heure de fin -->
      <div>
        <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
          Date et heure de fin
        </label>
        <input
          type="datetime-local"
          x-model="taskConfig.dueDate"
          :min="taskConfig.startDate"
          class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
        />
      </div>
    </div>
    
    <!-- FrÃ©quence -->
    <div>
      <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
        ðŸ”„ FrÃ©quence
      </label>
      <select
        x-model="taskConfig.frequency"
        @change="onFrequencyChange()"
        class="w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-gray-800 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"
      >
        <option value="none">Aucune</option>
        <option value="daily">Quotidienne</option>
        <option value="weekly">Hebdomadaire</option>
        <option value="monthly">Mensuelle</option>
      </select>
    </div>

    <!-- Jours de la semaine (si hebdomadaire) -->
    <div x-show="taskConfig.frequency === 'weekly'" x-cloak class="space-y-2">
      <label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">
        ðŸ“† Jours de la semaine
      </label>
      <div class="flex flex-wrap gap-2">
        <template x-for="(day, index) in [
          { value: 1, label: 'Lun' },
          { value: 2, label: 'Mar' },
          { value: 3, label: 'Mer' },
          { value: 4, label: 'Jeu' },
          { value: 5, label: 'Ven' },
          { value: 6, label: 'Sam' },
          { value: 0, label: 'Dim' }
        ]" :key="day.value">
          <label class="flex cursor-pointer items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm transition-colors hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
                 :class="(taskConfig.repeatDaysOfWeek || []).includes(day.value) ? 'bg-brand-100 border-brand-500 text-brand-700 dark:bg-brand-900/30 dark:border-brand-500' : 'bg-white text-gray-700 dark:bg-gray-800 dark:text-gray-300'">
            <input
              type="checkbox"
              :value="day.value"
              x-model="taskConfig.repeatDaysOfWeek"
              class="h-4 w-4 rounded border-gray-300 text-brand-500 focus:ring-brand-500 dark:border-gray-600"
            />
            <span x-text="day.label"></span>
          </label>
        </template>
      </div>
      <p class="text-xs text-gray-500 dark:text-gray-400" x-show="!taskConfig.repeatDaysOfWeek || taskConfig.repeatDaysOfWeek.length === 0">
        SÃ©lectionnez au moins un jour
      </p>
    </div>
  </div>

  <!-- Preuve requise -->
  <div class="flex items-center gap-2">
    <input
      type="checkbox"
      x-model="taskConfig.requiresProof"
      id="requires-proof-task"
      class="h-4 w-4 rounded border-gray-300 text-brand-500 focus:ring-brand-500 dark:border-gray-700"
    />
    <label for="requires-proof-task" class="text-sm font-medium text-gray-700 dark:text-gray-300">
      Preuve requise
    </label>
  </div>

  <!-- Boutons -->
  <div class="flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-800">
    <button
      type="button"
      @click="closeConfigSheet()"
      class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"
    >
      Annuler
    </button>
    <button
      type="submit"
      :disabled="configSubmitting"
      class="flex-1 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white shadow-theme-xs hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      <span x-show="!configSubmitting">Enregistrer</span>
      <span x-show="configSubmitting">Enregistrement...</span>
    </button>
  </div>
</form>


